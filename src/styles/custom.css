/* Custom CSS - minimal overrides only */
@import './tokens.css';

:root {
  --sl-color-accent-low: var(--t-accent-low);
  --sl-color-accent: var(--t-accent);
  --sl-color-accent-high: var(--t-accent-high);
  --sl-font: 'Pretendard', 'Apple SD Gothic Neo', sans-serif;
  --sl-content-width: 67.5rem;

  /* Background unification with landing page */
  --sl-color-bg: var(--t-bg);
  --sl-color-bg-nav: var(--t-bg);
  --sl-color-bg-sidebar: var(--t-bg);
  --sl-color-hairline-light: var(--t-border);
  --sl-color-hairline: var(--t-border);
}

:root[data-theme='light'] {
  --sl-color-accent-low: var(--t-accent-low);
  --sl-color-accent: var(--t-accent);
  --sl-color-accent-high: var(--t-accent-high);

  /* Background unification with landing page (light mode) */
  --sl-color-bg: var(--t-bg);
  --sl-color-bg-nav: var(--t-bg);
  --sl-color-bg-sidebar: var(--t-bg);
  --sl-color-hairline-light: var(--t-border);
  --sl-color-hairline: var(--t-border);
}

/* Hide RSS icon and its container from header social links */
a[href$="rss.xml"],
li:has(a[href$="rss.xml"]) {
  display: none !important;
}

/* Hide duplicate blog metadata in content area (rendered in title area via PageTitle override) */
.sl-markdown-content > .metadata {
  display: none !important;
}

/* Blog pages: keep the nav.sidebar (and hamburger button) visible,
   but remove the content-offset since there is no persistent sidebar panel.
   The sidebar pane itself stays in the DOM so the hamburger can toggle it;
   it will show only the MobileMenuFooter (SocialIcons + ThemeSelect) since
   Sidebar.astro renders no sublist for blog pages. */
[data-no-sidebar] .main-frame {
  padding-inline-start: 0 !important;
}

/* On desktop (â‰¥50rem) blog pages need no sidebar space at all */
@media (min-width: 50rem) {
  [data-no-sidebar] nav.sidebar {
    display: none !important;
  }
}

/*
  Blog list page: the custom Header.astro adds a fixed hamburger button
  (blog-menu-wrap) at inset-inline-end on mobile. Starlight's PageFrame only
  adds the header padding-inline-end compensation when data-has-sidebar is
  present. On blog pages (no sidebar) we must add it ourselves so the search
  button is not obscured by the hamburger.
*/
@media (max-width: 49.999rem) {
  [data-no-sidebar] .header {
    padding-inline-end: calc(
      var(--sl-nav-gap) + var(--sl-nav-pad-x) + var(--sl-menu-button-size)
    ) !important;
  }
}

/* Blog post: hide plugin's own prev/next navigation */
.post-footer .pagination {
  display: none;
}

/* Blog listing: show only first paragraph, truncated to 2 lines */
.posts article.preview .sl-markdown-content > * {
  display: none;
}
.posts article.preview .sl-markdown-content > p:first-child {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  color: var(--sl-color-gray-3);
  font-size: var(--sl-text-sm);
  margin: 0;
}
